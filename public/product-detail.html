<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Royale Time | Product Detail</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 flex flex-col min-h-screen font-sans">

<section class="max-w-7xl mx-auto px-6 py-12">
<div id="productDetail" class="grid md:grid-cols-2 gap-12 bg-white p-6 rounded-2xl shadow-md"></div>
</section>

<script>
const params = new URLSearchParams(window.location.search);
const id = params.get('id');
const productDetail = document.getElementById('productDetail');

async function fetchProduct() {
  const res = await fetch('/api/watches');
  const products = await res.json();
  const product = products.find(p => p.id == id);

  if(!product){
    productDetail.innerHTML = '<p>Product not found.</p>';
    return;
  }

  productDetail.innerHTML = `
    <img src="${product.image}" class="w-full h-96 object-cover rounded-xl">
    <div>
      <h2 class="text-3xl font-bold mb-4">${product.title}</h2>
      <p class="text-gray-600 mb-4">${product.description}</p>
      <p class="text-2xl font-semibold mb-6">à§³${product.price}</p>
      <button id="addToCart" class="bg-gray-900 text-white px-6 py-3 rounded-full hover:bg-gray-800">Add to Cart</button>
    </div>
  `;

  document.getElementById('addToCart').addEventListener('click', () => {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    const existingIndex = cart.findIndex(item => item.id === product.id);
    if(existingIndex >= 0){
      cart[existingIndex].qty += 1;
    } else {
      cart.push({...product, qty:1});
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    alert('Added to cart!');
  });
}

fetchProduct();
</script>

</body>
</html>
